name = "agent0-semantic-search"
main = "worker/src/index.ts"
compatibility_date = "2024-11-25"
compatibility_flags = ["nodejs_compat"]

# Include utils directory in the build
[build]
command = ""

# Environment variables
# Required secrets (set via: wrangler secret put <NAME>)
# - VENICE_API_KEY: Venice AI API key for embeddings
# - PINECONE_API_KEY: Pinecone API key
# - PINECONE_INDEX: Pinecone index name
# - RPC_URL: Ethereum RPC endpoint URL (for blockchain access)

# Optional secrets
# - PINECONE_NAMESPACE: Pinecone namespace (if using namespaces)

[vars]
# Non-secret environment variables can be added here

# Cron triggers for automatic indexing
[[triggers.crons]]
cron = "*/15 * * * *"  # Every 15 minutes (default, can be overridden via D1 config)

# D1 database for sync state storage
[[d1_databases]]
binding = "DB"
database_name = "semantic-sync-state"
database_id = "your-database-id-here"
# Note: Run 'wrangler d1 migrations apply semantic-sync-state' to apply migrations

