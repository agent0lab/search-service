name = "agent0-semantic-search"
main = "worker/src/index.ts"
compatibility_date = "2024-11-25"
compatibility_flags = ["nodejs_compat"]

# Include utils directory in the build
[build]
command = ""

# Environment variables
# Required secrets (set via: wrangler secret put <NAME>)
# - VENICE_API_KEY: Venice AI API key for embeddings
# - PINECONE_API_KEY: Pinecone API key
# - PINECONE_INDEX: Pinecone index name
# - RPC_URL: Ethereum RPC endpoint URL (for blockchain access)

# Optional secrets
# - PINECONE_NAMESPACE: Pinecone namespace (if using namespaces)

[vars]
# Non-secret environment variables can be added here

# Cron triggers for automatic indexing
# Note: Configure via Cloudflare Dashboard (Workers > agent0-semantic-search > Triggers > Cron Triggers)
# Recommended: */15 * * * * (every 15 minutes)
# [[triggers.crons]]
# cron = "*/15 * * * *"

# D1 database for sync state storage
[[d1_databases]]
binding = "DB"
database_name = "semantic-sync-state"
database_id = "164eaaf0-6527-4e1b-b859-5805aae1b6c9"
# Use remote database: npm run dev:remote (uses --remote flag)
# Note: Run 'wrangler d1 migrations apply semantic-sync-state --remote' to apply migrations to remote

